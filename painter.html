<!DOCTYPE html>
<html lang="en">
<head>
    
    <!--- Meta Tags for SEO --->
    <title>Doc2pen</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/png" href="assets/images/favicon.png">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <!--Importing JQUERY-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!--Import Font-->
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <!--Getting our CSS-->
    <link rel="stylesheet" href="assets/css/painter.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css" />
</head>
<body>
    <!--Navigation Bar is loaded dynamically from the main.js-->
    <div class="nav-back"></div>
    <button onclick="doCapture()">Save</button>
    <p>Color Picker</p>
    <input id="colorPicker"value="#000000" data-jscolor="">
    <button onclick="toggleMode(modes.pan)">Toggle Pan</button>
        <button onclick="toggleMode(modes.drawing)">Toggle Drawing</button>

    <!-- Canvas is created by assest/js/painter.js file -->
    <canvas id="canvas"></canvas>
    <div id="objectButtons">
        <p id="objectsTitle">Objects</p>
        <button onclick="createRectangle(canvas)">Rect</button>
        <button onclick="createCircle(canvas)">Circ</button>
        <p>Actions</p>
        <button onclick="groupObjects(canvas,group,true)">Group</button>
        <button onclick="groupObjects(canvas,group,false)">Ungroup</button>
        
        <button onclick="clearCanvas(canvas,svgState)">Clear</button>
        <button onclick="restoreCanvas(canvas,svgState,bgUrl)">Restore</button>
        <div class="upload">
            <p>Image</p>
            <input type="file" id="imageFile" accept="image/*">
        </div>
        
    </div>
    <!-- For saving the canvas but it's not working right now -->
    <script>
        const myCanvas = document.getElementById("canvas")
        function doCapture(){
            //For Ie/edge browsers
            if(window.navigator.msSaveBlob){
                window.navigator.msSaveBlob(myCanvas.msToBlob(),"canvas-image.png")
            } else{
                // const a = document.createElement("a");
                // document.body.appendChild(a);
                // a.href = myCanvas.toDataURL("image/jpeg",0.9)
                // a.download = "canvas-image.jpg";
                // a.click()
                // document.body.removeChild(a);
                var canvas = document.getElementById("canvas");
                canvas.toBlob(function(blob) {
                    saveAs(blob, "pretty image.png");
                });
            }
        }
    </script>
    <script src="assets/lib/jscolor.js"></script>

    <!-- Using for saving the canvas (FileSaver.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js" integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ==" crossorigin="anonymous"></script>
    <!-- Fabric.js main library -->
    <script src="assets/lib/fabricMin.js"></script>
    <!--JS File for dynamically loading navigation bar, footer, Team Section-->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/painter.js"></script>
    <!-- Footer is loaded dynamically from main.js-->
    
</body>
</html>